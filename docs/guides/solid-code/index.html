<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-guides docs-doc-id-solid-code">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Writing SOLID Code | @hades-ts/hades</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hades-ts.github.io/docs/guides/solid-code"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-guides-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-guides-current"><meta data-rh="true" property="og:title" content="Writing SOLID Code | @hades-ts/hades"><meta data-rh="true" name="description" content="Or: Saying what but not how."><meta data-rh="true" property="og:description" content="Or: Saying what but not how."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hades-ts.github.io/docs/guides/solid-code"><link data-rh="true" rel="alternate" href="https://hades-ts.github.io/docs/guides/solid-code" hreflang="en"><link data-rh="true" rel="alternate" href="https://hades-ts.github.io/docs/guides/solid-code" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="@hades-ts/hades RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="@hades-ts/hades Atom Feed"><link rel="stylesheet" href="/assets/css/styles.5afe3abe.css">
<link rel="preload" href="/assets/js/runtime~main.1af21d21.js" as="script">
<link rel="preload" href="/assets/js/main.fc5a678e.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_YhsO" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="@hades-ts/hades" class="themedImage__ABl themedImage--light_KpfR"><img src="/img/logo.png" alt="@hades-ts/hades" class="themedImage__ABl themedImage--dark_AACD"></div></a><a class="navbar__item navbar__link" href="/docs/hades">hades</a><a class="navbar__item navbar__link" href="/docs/text-commands">text-commands</a><a class="navbar__item navbar__link" href="/docs/slash-commands">slash-commands</a><a class="navbar__item navbar__link" href="/docs/bots">bots</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/guides">guides</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">blog</a><a href="https://github.com/hades-ts/hades" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_DWNK colorModeToggle_GTOu"><button class="clean-btn toggleButton_gda8 toggleButtonDisabled_zD42" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pRLm"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_bM7f"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_t9LX"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-text-commands-current,docs-hades-current,docs-slash-commands-current,docs-bots-current,docs-guides-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_y9qz docsWrapper_VLgn"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_Ui_7" type="button"></button><div class="docPage_RO7L"><aside class="theme-doc-sidebar-container docSidebarContainer_rmzF"><div class="sidebar_Q7Rf"><nav class="menu thin-scrollbar menu__8m2"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/guides/">Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/ejecting-a-bot">Ejecting Bots</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/bot-generator">Generating a Bot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/solid-code">Writing SOLID Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/di">Dependency Injection</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Cv27"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_XR7k"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_Ba16"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Jy_E"><div class="docItemContainer_aBuN"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_TVDP" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_ZKlE"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Writing SOLID Code</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_rqXL theme-doc-toc-mobile tocMobile_zFbo"><button type="button" class="clean-btn tocCollapsibleButton_RoQ5">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Writing SOLID Code</h1><p>Or: <em>Saying what but not how</em>.</p><p>Obviously, a complete description of what makes code good is not going to fit into the following sections.</p><p>Instead, we&#x27;ll explore one key idea that might contribute to code being good: Dependency Injection</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="why-use-dependency-injection">Why Use Dependency Injection?<a class="hash-link" href="#why-use-dependency-injection" title="Direct link to heading">​</a></h2><p>You may or may not already be familiar with dependency injection as a design pattern.</p><p>If not, this document will try to build up an intuition for its value starting from the ground up.</p><p>Even if you are familiar with dependency injection, you may find the following an interesting read.</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="encapsulation-and-naive-refactoring">Encapsulation and Naive Refactoring<a class="hash-link" href="#encapsulation-and-naive-refactoring" title="Direct link to heading">​</a></h2><p>What does encapsulation mean?</p><p>A workable definition could be:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">To put what is on the outside on the inside.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What does refactoring mean?</p><p>A workable definition could be:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">To restructure software to improve it, usually without changing its functionality.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Most developers are familiar with the kind of &quot;naive refactoring&quot; we often do where we try to break up a function or class into smaller parts.</p><p>It&#x27;s this kind of refactoring we&#x27;ll explore. To think a bit deeper about why we do this kind of refactoring so that we can do it wittingly.</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="the-three-spirits-of-encapsulation">The Three Spirits of Encapsulation<a class="hash-link" href="#the-three-spirits-of-encapsulation" title="Direct link to heading">​</a></h2><p>There are two primary ways to do encapsulation in most modern languages:</p><ul><li>Functions</li><li>Classes</li></ul><p>We wont get into their differences right now.</p><p>Currently we&#x27;re interested in an important way in which they are similar.</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">They both let you put stuff that&#x27;s outside, on the inside.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In both cases, each has three primary aspects, or spirits:</p><ul><li>Its overall responsibility or purpose</li><li>A strategy it uses to fulfill that purpose</li><li>The specific implementation of that strategy</li></ul><p>That a function or class&#x27; has purpose is straight-forward enough.</p><p>But that it has both a strategy and an implementation of that strategy, as separate things, that&#x27;s more interesting.</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="strategy-and-implementation">Strategy and Implementation<a class="hash-link" href="#strategy-and-implementation" title="Direct link to heading">​</a></h2><p>What makes a strategy and the implementation of that strategy different things?</p><p>Here&#x27;s an easy way to think about it:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">For any strategy, there are multiple implementations of that strategy</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hence they&#x27;re not necessarily the same thing.</p><p>For trivial cases, they can be -- but it&#x27;s not the trivial cases that cause us trouble.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="understanding-strategy">Understanding Strategy<a class="hash-link" href="#understanding-strategy" title="Direct link to heading">​</a></h3><p>Consider this:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">If you have the wrong strategy, no implementation of it is helpful.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You must first have a strategy which accomplishes the right goal. </p><p>If we have the wrong strategy, it doesn&#x27;t matter how correct or incorrect the implementation of that strategy is.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="understanding-implementation">Understanding Implementation<a class="hash-link" href="#understanding-implementation" title="Direct link to heading">​</a></h3><p>Consider this:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">To understand which strategy is employed by some code, you must first understand its implementation.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Only by first working through the existing implementation of a strategy can we even get at which strategy is being used.</p><p>Understanding the implementation is a barrier to understanding the strategy which is a barrier to understanding if the implementation is correct.</p><p>There&#x27;s gotta be a better way!</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="expressiveness">Expressiveness<a class="hash-link" href="#expressiveness" title="Direct link to heading">​</a></h3><p>Expressiveness is one of those terms that gets thrown around a lot and everyone has their own definition.</p><p>But we can now consider a very particular form of expressiveness:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">How readily some code says what its strategy is.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_xxAM" id="writing-expressive-code">Writing Expressive Code<a class="hash-link" href="#writing-expressive-code" title="Direct link to heading">​</a></h2><p>How can we address the contention between strategy and implementation?</p><p>How can we write code that says what its strategy is, without the implementation getting in our way?</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="distillation">Distillation<a class="hash-link" href="#distillation" title="Direct link to heading">​</a></h3><p>If the strategy is &quot;what is done&quot; and implementation is &quot;how it is done&quot;,</p><p>Distillation is then:</p><div class="codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-text codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token plain">Reducing the amount of detail regarding the how of what is done.</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is where encapsulation comes back into the picture.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="delegation">Delegation<a class="hash-link" href="#delegation" title="Direct link to heading">​</a></h3><p>We can achieve the distillation we&#x27;re after through delegation.</p><p>By throwing those implementation details into some secondary encapsulation we can then delegate to it.</p><p>By delegating to the encapsulation we replace the implementation details with a call to that delegate.</p><p>Assuming we have good naming convention and style, what is left over is an artifact saying <em>what</em> we&#x27;re doing but <em>not how</em>.</p><p>The &quot;how&quot; has been hidden inside the delegate encapsulation.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="squinting">Squinting<a class="hash-link" href="#squinting" title="Direct link to heading">​</a></h3><p>How do we know which bits of implementation to group together and delegate out into an encapsulation?</p><p>Well, in general, we want to capture the very highest-level description of the local strategy.</p><p>Obviously, you can take this too far. </p><p>If you&#x27;re trying to tell someone how to draw a house, giving them the single step of &quot;1. draw the house&quot; isn&#x27;t very helpful. It&#x27;s too coarse of a description.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawHouse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawHouse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At the opposite end of the spectrum we have the implementation itself, all the atomic steps needed to carry out the strategy.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawHouse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;blue&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;green&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;brown&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>What we want is something that approaches the former without reaching it. We want to express the minimal number of steps but enough to actually differentiate this strategy from the alternatives.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawTriangle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">120</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawRectangle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> y</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">color</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">width</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pen</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawWalls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawRectangle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;blue&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawRoof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawTriangle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;green&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawDoor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawRectangle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;brown&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">drawHouse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawWalls</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawRoof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">drawDoor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Unfortunately there is no generalized method for deriving what level of description best conveys the nature of a given strategy.</p><p>You&#x27;ll just have to squint.</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="dependencies">Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">​</a></h2><p>With delegation as our approach of choice for distillation we introduce a curious problem.</p><p>We introduce a dependency relationship from the distilled to the delegate.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="where-do-dependencies-come-from">Where Do Dependencies Come From?<a class="hash-link" href="#where-do-dependencies-come-from" title="Direct link to heading">​</a></h3><p>There are three primary ways we can get at dependencies:</p><ul><li>Construction</li><li>Service Location</li><li>Dependency Injection</li></ul><p>One of these is not like the other two. Can you guess which?</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="construction">Construction<a class="hash-link" href="#construction" title="Direct link to heading">​</a></h3><p>With construction, we instantiate the dependency directly ourselves. Not only do we take on providing our own dependency, but all of its constructor arguments too.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;x&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;y&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;z&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_xxAM" id="service-location">Service Location<a class="hash-link" href="#service-location" title="Direct link to heading">​</a></h3><p>Service location is any mechanism for reaching out to a parent scope in order to reference the dependency. This might be in the form of an import or a module-level local.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Bar</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;x&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;y&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;z&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or import { bar } from &quot;./some-module&quot;;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bar</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_xxAM" id="dependency-injection">Dependency Injection<a class="hash-link" href="#dependency-injection" title="Direct link to heading">​</a></h3><p>&quot;Dependency Injection&quot; means it is up to someone else to provide our dependencies to us. Usually this is in the form of function or constructor arguments.</p><div class="language-ts codeBlockContainer_PsOe theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Kih9"><pre tabindex="0" class="prism-code language-ts codeBlock_KfbD thin-scrollbar"><code class="codeBlockLines_a850"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Foo</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Bar</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bar</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bar </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bar</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_ne0F"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RGLq" aria-hidden="true"><svg class="copyButtonIcon_k5Wg" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RLtT" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_xxAM" id="why-dependency-injection-is-best">Why Dependency Injection is Best<a class="hash-link" href="#why-dependency-injection-is-best" title="Direct link to heading">​</a></h2><p>Dependency injection is the only way to obtain dependencies that embodies the principle of Inversion of Control.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="inversion-of-control">Inversion of Control<a class="hash-link" href="#inversion-of-control" title="Direct link to heading">​</a></h3><p>&quot;Inversion of Control&quot; is a general idea wherein we relinquish control over objects, data, or other portions of our program to... well someone else!</p><p>In the case of dependency injection, we are relinquishing control over where our dependencies come from.</p><p>Someone else must &quot;inject&quot; those dependencies into us, usually via function or constructor parameter.</p><h3 class="anchor anchorWithStickyNavbar_xxAM" id="solid-principles">SOLID Principles<a class="hash-link" href="#solid-principles" title="Direct link to heading">​</a></h3><p>Dependency injection helps us achieve each of the other SOLID principles.</p><p><strong>Single Responsibility Principle</strong></p><p>By delegating implementation details out to subordinate encapsulations we leave only orchestrating those dependencies as the sole responsibility of most components.</p><p><strong>Open / Close Principle</strong></p><p>By changing which dependencies are injected, we can change the behavior of the consumer without modifying it.</p><p><strong>Liskov Substitution Principle</strong></p><p>By specifying our dependencies as interfaces, we don&#x27;t care which specific dependency we get, we just need one we can work with.</p><p><strong>Interface Segregation Principle</strong></p><p>Taking in narrowly typed dependencies that represent just the functionality we need avoids utilizing resources or behavior our function or class doesn&#x27;t actually need, or shouldn&#x27;t use.</p><h2 class="anchor anchorWithStickyNavbar_xxAM" id="clarity-of-mind">Clarity of Mind<a class="hash-link" href="#clarity-of-mind" title="Direct link to heading">​</a></h2><p>The biggest advantage to dependency injection is focus and clarity of mind we are able to enjoy while working on any individual component.</p><p>If we understand the responsibility or purpose of the component we&#x27;re working on, we can start to formulate a high-level strategy it might take.</p><p>As you start to write the component, we no longer need to start off by typing out all the implementation details.</p><p>Instead, we can simply declare dependencies, even if they don&#x27;t exist yet, that would be the most helpful delegates for saying what our component&#x27;s strategy is.</p><p>All we need to worry about is orchestrating those dependencies to carry out that strategy in the most distilled and expressive way possible.</p><p>Once we are satisfied, we can move on to implementing the dependencies and hashing out the implementation details.</p><p>Of course, we can apply this exact same thinking to the implementation of those dependencies.</p><p>We can keep delegating until there&#x27;s nothing left to delegate. Until further delegation would result in simply saying &quot;1. draw the owl&quot;. At that point it&#x27;s time to stop delegation an actually implement the narrow concern or responsibility at hand.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guides/bot-generator"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Generating a Bot</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guides/di"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Dependency Injection</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Ua3n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-use-dependency-injection" class="table-of-contents__link toc-highlight">Why Use Dependency Injection?</a></li><li><a href="#encapsulation-and-naive-refactoring" class="table-of-contents__link toc-highlight">Encapsulation and Naive Refactoring</a></li><li><a href="#the-three-spirits-of-encapsulation" class="table-of-contents__link toc-highlight">The Three Spirits of Encapsulation</a></li><li><a href="#strategy-and-implementation" class="table-of-contents__link toc-highlight">Strategy and Implementation</a><ul><li><a href="#understanding-strategy" class="table-of-contents__link toc-highlight">Understanding Strategy</a></li><li><a href="#understanding-implementation" class="table-of-contents__link toc-highlight">Understanding Implementation</a></li><li><a href="#expressiveness" class="table-of-contents__link toc-highlight">Expressiveness</a></li></ul></li><li><a href="#writing-expressive-code" class="table-of-contents__link toc-highlight">Writing Expressive Code</a><ul><li><a href="#distillation" class="table-of-contents__link toc-highlight">Distillation</a></li><li><a href="#delegation" class="table-of-contents__link toc-highlight">Delegation</a></li><li><a href="#squinting" class="table-of-contents__link toc-highlight">Squinting</a></li></ul></li><li><a href="#dependencies" class="table-of-contents__link toc-highlight">Dependencies</a><ul><li><a href="#where-do-dependencies-come-from" class="table-of-contents__link toc-highlight">Where Do Dependencies Come From?</a></li><li><a href="#construction" class="table-of-contents__link toc-highlight">Construction</a></li><li><a href="#service-location" class="table-of-contents__link toc-highlight">Service Location</a></li><li><a href="#dependency-injection" class="table-of-contents__link toc-highlight">Dependency Injection</a></li></ul></li><li><a href="#why-dependency-injection-is-best" class="table-of-contents__link toc-highlight">Why Dependency Injection is Best</a><ul><li><a href="#inversion-of-control" class="table-of-contents__link toc-highlight">Inversion of Control</a></li><li><a href="#solid-principles" class="table-of-contents__link toc-highlight">SOLID Principles</a></li></ul></li><li><a href="#clarity-of-mind" class="table-of-contents__link toc-highlight">Clarity of Mind</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">License MIT :)</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1af21d21.js"></script>
<script src="/assets/js/main.fc5a678e.js"></script>
</body>
</html>